I"Èˆ<h1 id="table-of-contents">Table of contents</h1>

<ul>
  <li><a href="#---">ì˜¤ë¥˜ ì½”ë“œë³´ë‹¤ ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•˜ë¼</a></li>
  <li><a href="#try-catch-finally---">Try-Catch-Finally ë¬¸ ë¶€í„° ì‘ì„±í•˜ë¼</a></li>
  <li><a href="#unchecked--">ë¯¸í™•ì¸(unchecked) ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•˜ë¼</a></li>
  <li><a href="#--">ì˜ˆì™¸ì— ì˜ë¯¸ë¥¼ ì œê³µí•˜ë¼</a></li>
  <li><a href="#----">í˜¸ì¶œìë¥¼ ê³ ë ¤í•´ ì˜ˆì™¸ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•´ë¼</a></li>
  <li><a href="#--">ì •ìƒ íë¦„ì„ ì •ì˜í•˜ë¼.</a></li>
  <li><a href="#null--">nullì„ ë°˜í™˜í•˜ì§€ ë§ˆë¼</a></li>
  <li><a href="#null--">nullì„ ì „í™˜í•˜ì§€ ë§ˆë¼</a></li>
</ul>

<p>ì˜ˆì™¸ ì²˜ë¦¬ì— ëŒ€í•´ ì•Œì•„ë³´ë˜ ì¤‘ Clean Codeë¼ëŠ” ì±…ì— ì˜ˆì™¸ ì²˜ë¦¬í•˜ëŠ” êµ¬ë¬¸ì´ ì •ë¦¬ëœ ë¸”ë¡œê·¸ë¥¼ ëª‡ê°œ ë°œê²¬í–ˆë‹¤. ë‹¤ìŒì—” ë‚´ê°€ ì±… ì‚¬ì„œ ë‹¤ ì½ê³  ì •ë¦¬í•´ì•¼ì§€!!</p>

<h2 id="ì˜¤ë¥˜-ì½”ë“œë³´ë‹¤-ì˜ˆì™¸ë¥¼-ì‚¬ìš©í•˜ë¼">ì˜¤ë¥˜ ì½”ë“œë³´ë‹¤ ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•˜ë¼</h2>

<p>ì˜¤ë¥˜ ì½”ë“œë¥¼ ë°›ì•„ ì²˜ë¦¬ ë¡œì§ì„ ì¶”ê°€í•˜ëŠ” ê²ƒ ë³´ë‹¤ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ ì˜ˆì™¸ë¥¼ ë˜ì§€ëŠ”ê²Œ ì¢‹ë‹¤.</p>

<p>badğŸ‘ : í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ ì¦‰ì‹œ ì˜¤ë¥˜ë¥¼ í™•ì¸í•˜ì§€ ì•Šìœ¼ë©´ ë¬¸ì œê°€ ë°œìƒí•  í™•ë¥ ì´ ë†’ìŒ</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DeviceController</span><span class="o">{</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">sendShuitDown</span><span class="o">(){</span>
		<span class="nc">DeviceHandle</span> <span class="n">handle</span> <span class="o">=</span> <span class="n">getHandle</span><span class="o">(</span><span class="no">DEV1</span><span class="o">);</span> 
		<span class="k">if</span><span class="o">(</span><span class="n">handle</span> <span class="o">!=</span> <span class="nc">DeviceHandle</span><span class="o">.</span><span class="na">INVALID</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">retreiveDeviceRecord</span><span class="o">(</span><span class="n">handle</span><span class="o">);</span>
			<span class="k">if</span><span class="o">(</span><span class="n">record</span><span class="o">.</span><span class="na">getStatus</span><span class="o">()</span> <span class="o">!=</span> <span class="no">DEVICE_SUSPEND</span><span class="o">){</span>
				<span class="n">pauseDevice</span><span class="o">(</span><span class="n">handle</span><span class="o">);</span> 
				<span class="o">...</span>
			<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
				<span class="n">logger</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="s">"Device suspend."</span><span class="o">);</span>
			<span class="o">}</span>
		<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
			<span class="n">logger</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="s">"Invalid handle for: "</span><span class="o">);</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>GoodğŸ‘ : ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ ì˜ˆì™¸ë¥¼ ë˜ì§€ëŠ” í¸ì´ ë‚«ë‹¤. ê·¸ëŸ¬ë©´ í˜¸ì¶œì ì½”ë“œê°€ ë” ê¹”ë”í•´ì§„ë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DeviceController</span><span class="o">{</span>
	<span class="o">...</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">sendShutDown</span><span class="o">(){</span>
		<span class="k">try</span><span class="o">{</span>
			<span class="n">tryToShutDown</span><span class="o">();</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">DeviceShutDownError</span> <span class="n">e</span><span class="o">){</span>
			<span class="n">logger</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
		<span class="o">}</span>
	<span class="o">}</span>
	
	<span class="kd">private</span> <span class="kt">void</span> <span class="nf">tryToShutDown</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">DeviceShutDownError</span> <span class="o">{</span>
		<span class="nc">DeviceHandle</span> <span class="n">handle</span> <span class="o">=</span> <span class="n">getHandle</span><span class="o">(</span><span class="no">DEV1</span><span class="o">);</span>
		<span class="nc">DeviceHandle</span> <span class="n">recrod</span> <span class="o">=</span> <span class="n">retrieveDeviceRecord</span><span class="o">(</span><span class="n">handle</span><span class="o">);</span> 
		
		<span class="n">pauseDevice</span><span class="o">(</span><span class="n">handle</span><span class="o">);</span>
		<span class="o">...</span>
	<span class="o">}</span>
	
	<span class="kd">private</span> <span class="nc">DeviceHandle</span> <span class="nf">getHandle</span><span class="o">(</span><span class="nc">DeviceID</span> <span class="n">id</span><span class="o">){</span>
		<span class="o">...</span>
			<span class="k">throw</span> <span class="k">new</span> <span class="nf">DeviceShutDownError</span><span class="o">(</span><span class="s">"Invalid handle for: "</span><span class="o">);</span>
		<span class="o">...</span>
	<span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="try-catch-finally-ë¬¸-ë¶€í„°-ì‘ì„±í•˜ë¼">Try-Catch-Finally ë¬¸ ë¶€í„° ì‘ì„±í•˜ë¼</h2>

<p>try-catch-finally ë¬¸ìœ¼ë¡œ ì‹œì‘í•˜ë©´ try ë¸”ë¡ì—ì„œ ë¬´ìŠ¨ì¼ì´ ìƒê¸°ëŠ”ì§€ í˜¸ì¶œìê°€ ê¸°ëŒ€í•˜ëŠ” ìƒíƒœë¥¼ ì •ì˜í•˜ê¸° ì‰¬ì›Œì§„ë‹¤.</p>

<p>tryë¬¸ì€ transactionì²˜ëŸ¼ ë™ì‘í•˜ëŠ” ì‹¤í–‰ì½”ë“œë¡œ, catchë¬¸ì€ tryë¬¸ì— ê´€ê³„ì—†ì´ í”„ë¡œê·¸ë¨ì„ ì¼ê´€ì ì¸ ìƒíƒœë¡œ ìœ ì§€í•˜ë„ë¡ í•œë‹¤.</p>

<h3 id="step-1">Step 1</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="c1">// Step 1: StorageExceptionì„ ë˜ì§€ì§€ ì•Šìœ¼ë¯€ë¡œ ì´ í…ŒìŠ¤íŠ¸ëŠ” ì‹¤íŒ¨í•œë‹¤.</span>

<span class="nd">@Test</span><span class="o">(</span><span class="n">expected</span> <span class="o">=</span> <span class="nc">StorageException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">retrieveSectionShouldThrowOnInvalidFileName</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">sectionStore</span><span class="o">.</span><span class="na">retrieveSection</span><span class="o">(</span><span class="s">"invalid - file"</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">RecordedGrip</span><span class="o">&gt;</span> <span class="nf">retrieveSection</span><span class="o">(</span><span class="nc">String</span> <span class="n">sectionName</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// dummy return until we have a real implementation</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">RecordedGrip</span><span class="o">&gt;();</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="step-2">Step 2</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="c1">// Step 2: ì´ì œ í…ŒìŠ¤íŠ¸ëŠ” í†µê³¼í•œë‹¤.</span>
<span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">RecordedGrip</span><span class="o">&gt;</span> <span class="nf">retrieveSection</span><span class="o">(</span><span class="nc">String</span> <span class="n">sectionName</span><span class="o">){</span>
  <span class="k">try</span><span class="o">{</span>
    <span class="nc">FileInputStream</span> <span class="n">stream</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="n">sectionName</span><span class="o">);</span>
  <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">StorageException</span><span class="o">(</span><span class="s">"retrieval error"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">RecordedGrip</span><span class="o">&gt;();</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="step-3">Step 3</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="c1">// Step 3: Exceptionì˜ ë²”ìœ„ë¥¼ FileNotFoundExceptionìœ¼ë¡œ ì¤„ì—¬ ì •í™•íˆ ì–´ë–¤ Exceptionì´ ë°œìƒí•œì§€ ì²´í¬í•˜ì.</span>
<span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">RecordedGrip</span><span class="o">&gt;</span> <span class="nf">retrieveSection</span><span class="o">(</span><span class="nc">String</span> <span class="n">sectionName</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">try</span> <span class="o">{</span>
    <span class="nc">FileInputStream</span> <span class="n">stream</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="n">sectionName</span><span class="o">);</span>
    <span class="n">stream</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
  <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">StorageException</span><span class="o">(</span><span class="s">"retrieval error"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">RecordedGrip</span><span class="o">&gt;();</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="ë¯¸í™•ì¸unchecked-ì˜ˆì™¸ë¥¼-ì‚¬ìš©í•˜ë¼">ë¯¸í™•ì¸(unchecked) ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•˜ë¼</h2>

<ul>
  <li>ì˜ˆì „ì—ëŠ” ë©”ì„œë“œë¥¼ ì„ ì–¸í•  ë•ŒëŠ” ë©”ì„œë“œê°€ ë°˜í™˜í•  ì˜ˆì™¸ë¥¼ ëª¨ë‘ ì—´ê±° í–ˆë‹¤.</li>
  <li>ì˜ˆì™¸ ì²˜ë¦¬ì— ë“œëŠ” ë¹„ìš© ëŒ€ë¹„ ì´ë“ì„ ìƒê°í•´ë´ì•¼ í•œë‹¤.</li>
  <li>í™•ì¸ëœ ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•˜ë©´ <strong>OCP(Open Closed Principle)ë¥¼ ìœ„ë°˜í•œë‹¤.</strong>
    <ul>
      <li>í™•ì¸ëœ ì˜ˆì™¸ë¥¼ ë˜ì¡ŒëŠ”ë° catch ë¸”ë¡ì´ ì„¸ ë‹¨ê³„ ìœ„ì— ìˆë‹¤ë©´ ê·¸ ì‚¬ì´ ë©”ì„œë“œ ëª¨ë‘ê°€ ì„ ì–¸ë¶€ì— í•´ë‹¹ ì˜ˆì™¸ë¥¼ ì •ì˜í•´ì•¼ í•œë‹¤.</li>
      <li>ë‹¤ì‹œ ë¹Œë“œí•œ ë‹¤ìŒ ë°°í¬í•´ì•¼ í•œë‹¤.</li>
      <li>ìƒìœ„ ë ˆë²¨ ë©”ì†Œë“œì—ì„œ í•˜ìœ„ ë ˆë²¨ ë©”ì†Œë“œì˜ ë””í…Œì¼ì— ëŒ€í•´ ì•Œì•„ì•¼ í•˜ê¸° ë•Œë¬¸ì— ìº ìŠí™” ë˜í•œ ê¹¨ì§„ë‹¤.</li>
    </ul>
  </li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="kd">public</span> <span class="kt">void</span> <span class="nf">get</span><span class="o">(){</span>
	<span class="k">try</span><span class="o">{</span>
		
	<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InvalidGetException</span> <span class="n">e</span><span class="o">){</span>
		<span class="n">logger</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">getById</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">InvalidGetException</span> <span class="o">{</span>
	<span class="n">call</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">call</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">InvalidGetException</span> <span class="o">{</span>
	<span class="k">throw</span> <span class="k">new</span> <span class="nf">InvalidGetException</span><span class="o">();</span> 
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="ì˜ˆì™¸ì—-ì˜ë¯¸ë¥¼-ì œê³µí•˜ë¼">ì˜ˆì™¸ì— ì˜ë¯¸ë¥¼ ì œê³µí•˜ë¼</h2>

<p>í˜¸ì¶œ ìŠ¤íƒë§Œìœ¼ë¡œ ì‚¬ìš©ìê°€ ì˜ë„ë¥¼ íŒŒì•…í•˜ê¸° ì–´ë ¤ìš°ë¯€ë¡œ ì˜¤ë¥˜ ë©”ì‹œì§€ì— ì •ë³´ë¥¼ ë‹´ì•„ ì˜ˆì™¸ì™€ í•¨ê»˜ ë˜ì ¸ì•¼ í•œë‹¤. ì „í›„ ìƒí™©ì„ ì¶©ë¶„íˆ ë§ë¶™ì´ê³  ì‹¤íŒ¨í•œ ì—°ì‚° ì´ë¦„ê³¼ ì‹¤íŒ¨ ìœ í˜•ë„ ì–¸ê¸‰í•œë‹¤.</p>

<h2 id="í˜¸ì¶œìë¥¼-ê³ ë ¤í•´-ì˜ˆì™¸-í´ë˜ìŠ¤ë¥¼-ì •ì˜í•´ë¼">í˜¸ì¶œìë¥¼ ê³ ë ¤í•´ ì˜ˆì™¸ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•´ë¼</h2>

<p>í”„ë¡œê·¸ë˜ë¨¸ëŠ” ì˜¤ë¥˜ë¥¼ ì •ì˜í•  ë•Œ <strong>ì˜¤ë¥˜ë¥¼ ì¡ì•„ë‚´ëŠ” ë°©ë²•</strong>ì„ ê³ ë ¤í•´ì•¼í•œë‹¤.</p>

<p>ì™¸ë¶€ APIì˜ ë‹¤ì–‘í•œ ì˜ˆì™¸ë¥¼ ì§ì ‘ ë…¸ì¶œí•˜ì§€ ì•Šê³  ê°ì‹¸ê¸° ê¸°ë²•ì„ í†µí•´ ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ ìº¡ìŠí™”.</p>

<p>BadğŸ‘ : ë‹¤ë¥¸ ì¢…ë¥˜ì˜ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬ ë¡œì§ì€ ëª¨ë‘ ê°™ìœ¼ë¯€ë¡œ ì˜ë¯¸ê°€ ì—†ìŒ</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre><span class="c1">// ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë˜ì§ˆ ì˜ˆì™¸ë¥¼ ëª¨ë‘ ì¡ì•„ ë‚¸ë‹¤. </span>
<span class="c1">// ê°™ì€ ì—ëŸ¬ ì¡ì•„ ë‚´ëŠ” ì½”ë“œê°€ ë§ë‹¤. </span>
<span class="c1">// ë³€ê²½í•˜ê¸° ì–´ë µë‹¤.</span>

<span class="nc">ACMEPort</span> <span class="n">port</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ACMEPort</span><span class="o">(</span><span class="mi">12</span><span class="o">);</span>
<span class="k">try</span> <span class="o">{</span>
  <span class="n">port</span><span class="o">.</span><span class="na">open</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">DeviceResponseException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">reportPortError</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
  <span class="n">logger</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="s">"Device response exception"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ATM1212UnlockedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">reportPortError</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
  <span class="n">logger</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="s">"Unlock exception"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">GMXError</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">reportPortError</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
  <span class="n">logger</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="s">"Device response exception"</span><span class="o">);</span>
<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
  <span class="o">...</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>GoodğŸ‘ :</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre></td><td class="rouge-code"><pre><span class="c1">// í˜¸ì¶œí•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ APIë¥¼ ê°ì‹¸ë©´ì„œ ì˜ˆì™¸ ìœ í˜• í•˜ë‚˜ë¥¼ ë°˜í™˜.</span>
<span class="c1">// Wrapperí´ë˜ìŠ¤ ë•ë¶„ì— ì˜ì¡´ì„±ì´ í¬ê²Œ ê°ì†Œ.</span>

<span class="nc">LocalPort</span> <span class="n">port</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LocalPort</span><span class="o">(</span><span class="mi">12</span><span class="o">);</span>
<span class="k">try</span> <span class="o">{</span>
  <span class="n">port</span><span class="o">.</span><span class="na">open</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">PortDeviceFailure</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">reportError</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
  <span class="n">logger</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span> <span class="n">e</span><span class="o">);</span>
<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
  <span class="o">...</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LocalPort</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="nc">ACMEPort</span> <span class="n">innerPort</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">LocalPort</span><span class="o">(</span><span class="kt">int</span> <span class="n">portNumber</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">innerPort</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ACMEPort</span><span class="o">(</span><span class="n">portNumber</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">open</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">innerPort</span><span class="o">.</span><span class="na">open</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">DeviceResponseException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">PortDeviceFailure</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ATM1212UnlockedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">PortDeviceFailure</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">GMXError</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">PortDeviceFailure</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="o">...</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="ì •ìƒ-íë¦„ì„-ì •ì˜í•˜ë¼">ì •ìƒ íë¦„ì„ ì •ì˜í•˜ë¼.</h2>

<p>ì™¸ë¶€ APIë¥¼ ê°ì‹¸ ë…ìì ì¸ ì˜ˆì™¸ë¥¼ ë˜ì ¸ ì¤‘ë‹¨í•œ ë’¤ í˜¸ì¶œí•˜ëŠ” ì½”ë“œì—ì„œ</p>

<p>ì²˜ë¦¬ë¥¼ ì •ì˜í•´ ì¤‘ë‹¨ëœ ê³„ì‚°ì„ ì²˜ë¦¬í•˜ëŠ” ê²ƒì€ ëŒ€ê²Œ ì í•©í•˜ì§€ë§Œ ì¤‘ë‹¨ì´ ì í•©í•˜ì§€ ì•Šì€ ê²½ìš°ë„ ìˆë‹¤.</p>

<p>ì´ëŸ¬í•œ ê²½ìš° íŠ¹ìˆ˜ ì‚¬ë¡€ íŒ¨í„´(SPECIAL CASE PATTERN)ì„ ì ìš©í•´ ê°œì„ í•œë‹¤.</p>

<p>íŠ¹ìˆ˜ ì‚¬ë¡€ íŒ¨í„´ì´ë€?</p>

<p>ë°˜í™˜í•  ê°’ì´ ì—†ì„ ë•Œ ì˜ˆì™¸ë¥¼ ë˜ì§€ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ê¸°ë³¸ ê°’ì„ ë°˜í™˜</p>

<p>BadğŸ‘</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="c1">// ì‹ë¹„ë¹„ìš© ì¡°íšŒë¥¼ ì‹¤íŒ¨í•˜ë©´ ì¼ì¼ ê¸°ë³¸ ì‹ë¹„ë¥¼ ì´ê³„ì— ë”í•œë‹¤.</span>
<span class="c1">// íŠ¹ìˆ˜ ìƒí™©ì„ ì²˜ë¦¬í•  í•„ìš”ê°€ ì—†ë‹¤ë©´ ë” ì½”ë“œëŠ” ê°„ê²°í•´ì§„ë‹¤.</span>
<span class="k">try</span> <span class="o">{</span> 
  <span class="nc">MealExpenses</span> <span class="n">expenses</span> <span class="o">=</span> <span class="n">expenseReportDAO</span><span class="o">.</span><span class="na">getMeals</span><span class="o">(</span><span class="n">employee</span><span class="o">.</span><span class="na">getID</span><span class="o">());</span>
  <span class="n">m_total</span> <span class="o">+=</span> <span class="n">expenses</span><span class="o">.</span><span class="na">getTotal</span><span class="o">();</span> 
<span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="nc">MealExpensesNotFound</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">m_total</span> <span class="o">+=</span> <span class="n">getMealPerDiem</span><span class="o">();</span> 
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>GoodğŸ‘</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="c1">// caller logic.</span>
<span class="nc">MealExpenses</span> <span class="n">expenses</span> <span class="o">=</span> <span class="n">expenseReportDAO</span><span class="o">.</span><span class="na">getMeals</span><span class="o">(</span><span class="n">employee</span><span class="o">.</span><span class="na">getID</span><span class="o">());</span>
<span class="n">m_total</span> <span class="o">+=</span> <span class="n">expenses</span><span class="o">.</span><span class="na">getTotal</span><span class="o">();</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PerDiemMealExpenses</span> <span class="kd">implements</span> <span class="nc">MealExpenses</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">MEAL_EXPENSES_DEFAULT</span> <span class="o">=</span> <span class="mi">3000</span><span class="o">;</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getTotal</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// ê¸°ë³¸ê°’ìœ¼ë¡œ ì¼ì¼ ê¸°ë³¸ ì‹ë¹„ë¥¼ ë°˜í™˜</span>
		<span class="k">return</span> <span class="no">MEAL_EXPENSES_DEFAULT</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="nullì„-ë°˜í™˜í•˜ì§€-ë§ˆë¼">nullì„ ë°˜í™˜í•˜ì§€ ë§ˆë¼</h2>

<p>ë©”ì„œë“œê°€ nullì„ ë°˜í™˜í•˜ë©´ í•´ë‹¹ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ëŠ” null ì²´í¬ ì½”ë“œë¥¼ ì¶”ê°€í•  ìˆ˜ ë°–ì— ì—†ë‹¤. ì´ê²ƒì€ ì¢‹ì§€ ëª»í•œ ìŠµê´€ì´ë‹¤. ì´ ê³¼ì •ì—ì„œ null ì²´í¬ê°€ ëˆ„ë½ë˜ë©´ ë²„ê·¸ë¡œ ì´ì–´ì§€ê³ , null ì²´í¬ ì½”ë“œëŠ” ì•„ë¦„ë‹µì§€ ëª»í•˜ë‹¤. íŠ¹ìˆ˜ ì‚¬ë¡€ ê°ì²´ë¥¼ í†µí•´ ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.</p>

<p>BadğŸ‘</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="kd">public</span> <span class="kt">void</span> <span class="nf">registerItem</span><span class="o">(</span><span class="nc">Item</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span> 
  <span class="k">if</span> <span class="o">(</span><span class="n">item</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">ItemRegistry</span> <span class="n">registry</span> <span class="o">=</span> <span class="n">peristentStore</span><span class="o">.</span><span class="na">getItemRegistry</span><span class="o">();</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">registry</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="nc">Item</span> <span class="n">existing</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="na">getItem</span><span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">getID</span><span class="o">());</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">existing</span><span class="o">.</span><span class="na">getBillingPeriod</span><span class="o">().</span><span class="na">hasRetailOwner</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">existing</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">&gt;</span> <span class="n">employees</span> <span class="o">=</span> <span class="n">getEmployees</span><span class="o">();</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">employees</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span><span class="o">(</span><span class="nc">Employee</span> <span class="n">e</span> <span class="o">:</span> <span class="n">employees</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">totalPay</span> <span class="o">+=</span> <span class="n">e</span><span class="o">.</span><span class="na">getPay</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>GoodğŸ‘</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="c1">// ë” ì½ê¸° ì‰¬ìš´ ì½”ë“œ.</span>
  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">&gt;</span> <span class="n">employees</span> <span class="o">=</span> <span class="n">getEmployees</span><span class="o">();</span>
  <span class="k">for</span><span class="o">(</span><span class="nc">Employee</span> <span class="n">e</span> <span class="o">:</span> <span class="n">employees</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">totalPay</span> <span class="o">+=</span> <span class="n">e</span><span class="o">.</span><span class="na">getPay</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Employee</span><span class="o">&gt;</span> <span class="nf">getEmployees</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span><span class="o">(</span> <span class="o">..</span> <span class="n">there</span> <span class="n">are</span> <span class="n">no</span> <span class="n">employees</span> <span class="o">..</span> <span class="o">)</span>
      <span class="k">return</span> <span class="nc">Collections</span><span class="o">.</span><span class="na">emptyList</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="nullì„-ì „í™˜í•˜ì§€-ë§ˆë¼">nullì„ ì „í™˜í•˜ì§€ ë§ˆë¼</h2>

<p>ë©”ì„œë“œì˜ argumentë¡œ nullì„ ì „ë‹¬í•˜ê²Œ ë˜ë©´ ë©”ì„œë“œëŠ” ë‚´ë¶€ì—ì„œ null ì²´í¬ ë˜ëŠ” assertë¥¼ ì´ìš©í•˜ì—¬ ì²˜ë¦¬í•˜ëŠ” ë¡œì§ì„ ì¶”ê°€í•  ìˆ˜ ë°–ì— ì—†ë‹¤. ì´ëŸ¬í•œ ë¡œì§ì„ í†µí•´ exceptionì„ ë˜ì§€ëŠ” ë©”ì„œë“œê°€ ë˜ë©´ í•´ë‹¹ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ìª½ì—ì„œë„ exception ì²˜ë¦¬ë¥¼ ì¶”ê°€í•´ì•¼ í•œë‹¤.</p>

<p>í˜¸ì¶œìê°€ ë„˜ê¸°ëŠ” nullì„ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì€ ì—†ë‹¤. ì •ì±…ì ìœ¼ë¡œ nullì„ ë„˜ê¸°ì§€ ëª»í•˜ê²Œ í•˜ëŠ” ê²ƒì´ ê°€ì¥ í•©ë¦¬ì ì´ë‹¤.</p>

<p>BadğŸ‘</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="c1">// Parameterì— nullê°’ì´ ë“¤ì–´ì˜¤ë©´ NullPointerException ë°œìƒ.</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MetricsCalculator</span> <span class="o">{</span> 
  <span class="kd">public</span> <span class="kt">double</span> <span class="nf">xProjection</span><span class="o">(</span><span class="nc">Point</span> <span class="n">p1</span><span class="o">,</span> <span class="nc">Point</span> <span class="n">p2</span><span class="o">)</span> <span class="o">{</span> 
    <span class="k">return</span> <span class="o">(</span><span class="n">p2</span><span class="o">.</span><span class="na">x</span> <span class="err">â€“</span> <span class="n">p1</span><span class="o">.</span><span class="na">x</span><span class="o">)</span> <span class="o">*</span> <span class="mf">1.5</span><span class="o">;</span> 
  <span class="o">}</span> 
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Better</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MetricsCalculator</span> <span class="o">{</span> 
  <span class="kd">public</span> <span class="kt">double</span> <span class="nf">xProjection</span><span class="o">(</span><span class="nc">Point</span> <span class="n">p1</span><span class="o">,</span> <span class="nc">Point</span> <span class="n">p2</span><span class="o">)</span> <span class="o">{</span> 
    <span class="k">if</span><span class="o">(</span><span class="n">p1</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">p2</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
      <span class="k">throw</span> <span class="nf">InvalidArgumentException</span><span class="o">(</span><span class="s">"Invalid argument for MetricsCalculator.xProjection"</span><span class="o">);</span> 
    <span class="o">}</span> 
    <span class="k">return</span> <span class="o">(</span><span class="n">p2</span><span class="o">.</span><span class="na">x</span> <span class="err">â€“</span> <span class="n">p1</span><span class="o">.</span><span class="na">x</span><span class="o">)</span> <span class="o">*</span> <span class="mf">1.5</span><span class="o">;</span> 
  <span class="o">}</span> 
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>GoodğŸ‘</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MetricsCalculator</span> <span class="o">{</span> 
  <span class="kd">public</span> <span class="kt">double</span> <span class="nf">xProjection</span><span class="o">(</span><span class="nc">Point</span> <span class="n">p1</span><span class="o">,</span> <span class="nc">Point</span> <span class="n">p2</span><span class="o">)</span> <span class="o">{</span> 
    <span class="k">assert</span> <span class="n">p1</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">:</span> <span class="s">"p1 should not be null"</span><span class="o">;</span>
    <span class="k">assert</span> <span class="n">p2</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">:</span> <span class="s">"p2 should not be null"</span><span class="o">;</span>
    <span class="k">return</span> <span class="o">(</span><span class="n">p2</span><span class="o">.</span><span class="na">x</span> <span class="err">â€“</span> <span class="n">p1</span><span class="o">.</span><span class="na">x</span><span class="o">)</span> <span class="o">*</span> <span class="mf">1.5</span><span class="o">;</span> 
  <span class="o">}</span> 
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
:ET